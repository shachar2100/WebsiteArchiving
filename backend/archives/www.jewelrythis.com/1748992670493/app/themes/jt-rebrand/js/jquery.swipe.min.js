((e,t,n)=>{"function"==typeof define&&define.amd?define(["jquery"],function(e){return n(e,0,t),e.mobile}):n(e.jQuery,0,t)})(this,document,function(e,j,t,z){var c,n,u,s,F,l,a,o,r,p,h=e,i=t,H=void 0,v="virtualMouseBindings",d="virtualTouchID",f="vmouseover vmousedown vmousemove vmouseup vclick vmouseout vmousecancel".split(" "),m="clientX clientY pageX pageY screenX screenY".split(" "),g=h.event.mouseHooks?h.event.mouseHooks.props:[],V=h.event.props.concat(g),w={},b=0,T=0,D=0,y=!1,E=[],P=!1,X=!1,Y="addEventListener"in i,k=h(i),q=1,M=0;function I(e){for(;e&&void 0!==e.originalEvent;)e=e.originalEvent;return e}function x(e){for(var t,n,o={};e;){for(n in t=h.data(e,v))t[n]&&(o[n]=o.hasVirtualBinding=!0);e=e.parentNode}return o}function S(){X=!0}function Q(){X=!1}function L(){O(),b=setTimeout(function(){M=b=0,E.length=0,P=!1,S()},h.vmouse.resetTimerDuration)}function O(){b&&(clearTimeout(b),b=0)}function B(e,t,n){var o;return(n&&n[e]||!n&&((e,t)=>{for(var n;e;){if((n=h.data(e,v))&&(!t||n[t]))return e;e=e.parentNode}})(t.target,e))&&(o=((e,t)=>{var n,o,i,s,a,r,c,u=e.type;if((e=h.Event(e)).type=t,n=e.originalEvent,o=h.event.props,-1<u.search(/^(mouse|click)/)&&(o=V),n)for(a=o.length;a;)e[i=o[--a]]=n[i];if(-1<u.search(/mouse(down|up)|click/)&&!e.which&&(e.which=1),-1!==u.search(/^touch/)&&(u=(t=I(n)).touches,t=t.changedTouches,s=u&&u.length?u[0]:t&&t.length?t[0]:H))for(r=0,c=m.length;r<c;r++)e[i=m[r]]=s[i];return e})(t,e),h(t.target).trigger(o)),o}function A(e){var t=h.data(e.target,d);P||M&&M===t||(t=B("v"+e.type,e))&&(t.isDefaultPrevented()&&e.preventDefault(),t.isPropagationStopped()&&e.stopPropagation(),t.isImmediatePropagationStopped())&&e.stopImmediatePropagation()}function C(e){var t,n=I(e).touches;n&&1===n.length&&(t=x(n=e.target)).hasVirtualBinding&&(M=q++,h.data(n,d,M),O(),Q(),y=!1,n=I(e).touches[0],T=n.pageX,D=n.pageY,B("vmouseover",e,t),B("vmousedown",e,t))}function G(e){X||(y||B("vmousecancel",e,x(e.target)),y=!0,L())}function J(e){var t,n,o,i;X||(t=I(e).touches[0],n=y,o=h.vmouse.moveDistanceThreshold,i=x(e.target),(y=y||Math.abs(t.pageX-T)>o||Math.abs(t.pageY-D)>o)&&!n&&B("vmousecancel",e,i),B("vmousemove",e,i),L())}function K(e){var t,n;X||(S(),B("vmouseup",e,t=x(e.target)),y||(n=B("vclick",e,t))&&n.isDefaultPrevented()&&(n=I(e).changedTouches[0],E.push({touchID:M,x:n.clientX,y:n.clientY}),P=!0),B("vmouseout",e,t),y=!1,L())}function R(e){var t,n=h.data(e,v);if(n)for(t in n)if(n[t])return 1}function U(){}for(h.vmouse={moveDistanceThreshold:10,clickDistanceThreshold:10,resetTimerDuration:1500},n=0;n<f.length;n++)h.event.special[f[n]]=(n=>{var o=n.substr(1);return{setup:function(){R(this)||h.data(this,v,{}),h.data(this,v)[n]=!0,w[n]=(w[n]||0)+1,1===w[n]&&k.bind(o,A),h(this).bind(o,U),Y&&(w.touchstart=(w.touchstart||0)+1,1===w.touchstart)&&k.bind("touchstart",C).bind("touchend",K).bind("touchmove",J).bind("scroll",G)},teardown:function(){--w[n],w[n]||k.unbind(o,A),Y&&(--w.touchstart,w.touchstart||k.unbind("touchstart",C).unbind("touchmove",J).unbind("touchend",K).unbind("scroll",G));var e=h(this),t=h.data(this,v);t&&(t[n]=!1),e.unbind(o,U),R(this)||e.removeData(v)}}})(f[n]);function N(e,t,n,o){var i=n.type;n.type=t,o?u.event.trigger(n,F,e):u.event.dispatch.call(e,n),n.type=i}Y&&i.addEventListener("click",function(e){var t,n,o,i,s,a=E.length,r=e.target;if(a)for(t=e.clientX,n=e.clientY,c=h.vmouse.clickDistanceThreshold,o=r;o;){for(i=0;i<a;i++)if(s=E[i],o===r&&Math.abs(s.x-t)<c&&Math.abs(s.y-n)<c||h.data(o,d)===s.touchID)return e.preventDefault(),void e.stopPropagation();o=o.parentNode}},!0),e.mobile={},g=e,i={touch:"ontouchend"in t},g.mobile.support=g.mobile.support||{},g.extend(g.support,i),g.extend(g.mobile.support,i),s=this,l=(u=e)(t),g=u.mobile.support.touch,a="touchmove scroll",o=g?"touchstart":"mousedown",r=g?"touchend":"mouseup",p=g?"touchmove":"mousemove",u.each("touchstart touchmove touchend tap taphold swipe swipeleft swiperight scrollstart scrollstop".split(" "),function(e,t){u.fn[t]=function(e){return e?this.bind(t,e):this.trigger(t)},u.attrFn&&(u.attrFn[t]=!0)}),u.event.special.scrollstart={enabled:!0,setup:function(){var n,t,o=this;function i(e,t){N(o,(n=t)?"scrollstart":"scrollstop",e)}u(o).bind(a,function(e){u.event.special.scrollstart.enabled&&(n||i(e,!0),clearTimeout(t),t=setTimeout(function(){i(e,!1)},50))})},teardown:function(){u(this).unbind(a)}},u.event.special.tap={tapholdThreshold:750,emitTapOnTaphold:!0,setup:function(){var a=this,r=u(a),c=!1;r.bind("vmousedown",function(e){if(c=!1,e.which&&1!==e.which)return!1;var t,n=e.target;function o(){clearTimeout(t)}function i(){o(),r.unbind("vclick",s).unbind("vmouseup",o),l.unbind("vmousecancel",i)}function s(e){i(),c||n!==e.target?c&&e.preventDefault():N(a,"tap",e)}r.bind("vmouseup",o).bind("vclick",s),l.bind("vmousecancel",i),t=setTimeout(function(){u.event.special.tap.emitTapOnTaphold||(c=!0),N(a,"taphold",u.Event("taphold",{target:n}))},u.event.special.tap.tapholdThreshold)})},teardown:function(){u(this).unbind("vmousedown").unbind("vclick").unbind("vmouseup"),l.unbind("vmousecancel")}},u.event.special.swipe={scrollSupressionThreshold:30,durationThreshold:1e3,horizontalDistanceThreshold:30,verticalDistanceThreshold:30,getLocation:function(e){var t=s.pageXOffset,n=s.pageYOffset,o=e.clientX,i=e.clientY;return 0===e.pageY&&Math.floor(i)>Math.floor(e.pageY)||0===e.pageX&&Math.floor(o)>Math.floor(e.pageX)?(o-=t,i-=n):(i<e.pageY-n||o<e.pageX-t)&&(o=e.pageX-t,i=e.pageY-n),{x:o,y:i}},start:function(e){var t=e.originalEvent.touches?e.originalEvent.touches[0]:e,t=u.event.special.swipe.getLocation(t);return{time:(new Date).getTime(),coords:[t.x,t.y],origin:u(e.target)}},stop:function(e){e=e.originalEvent.touches?e.originalEvent.touches[0]:e,e=u.event.special.swipe.getLocation(e);return{time:(new Date).getTime(),coords:[e.x,e.y]}},handleSwipe:function(e,t,n,o){var i;return t.time-e.time<u.event.special.swipe.durationThreshold&&Math.abs(e.coords[0]-t.coords[0])>u.event.special.swipe.horizontalDistanceThreshold&&Math.abs(e.coords[1]-t.coords[1])<u.event.special.swipe.verticalDistanceThreshold&&(i=e.coords[0]>t.coords[0]?"swipeleft":"swiperight",N(n,"swipe",u.Event("swipe",{target:o,swipestart:e,swipestop:t}),!0),N(n,i,u.Event(i,{target:o,swipestart:e,swipestop:t}),!0),!0)},eventInProgress:!1,setup:function(){var s=this,e=u(s),a={},t=u.data(this,"mobile-events");t||u.data(this,"mobile-events",t={length:0}),t.length++,(t.swipe=a).start=function(e){var t,n,o,i;u.event.special.swipe.eventInProgress||(u.event.special.swipe.eventInProgress=!0,n=u.event.special.swipe.start(e),o=e.target,i=!1,a.move=function(e){n&&!e.isDefaultPrevented()&&(t=u.event.special.swipe.stop(e),i||(i=u.event.special.swipe.handleSwipe(n,t,s,o))&&(u.event.special.swipe.eventInProgress=!1),"mousemove"!=p)&&Math.abs(n.coords[0]-t.coords[0])>u.event.special.swipe.scrollSupressionThreshold&&e.preventDefault()},a.stop=function(){i=!0,u.event.special.swipe.eventInProgress=!1,l.off(p,a.move),a.move=null},l.on(p,a.move).one(r,a.stop))},e.on(o,a.start)},teardown:function(){var e,t=u.data(this,"mobile-events");t&&(e=t.swipe,delete t.swipe,t.length--,0===t.length)&&u.removeData(this,"mobile-events"),e&&(e.start&&u(this).off(o,e.start),e.move&&l.off(p,e.move),e.stop)&&l.off(r,e.stop)}},u.each({scrollstop:"scrollstart",taphold:"tap",swipeleft:"swipe.left",swiperight:"swipe.right"},function(e,t){u.event.special[e]={setup:function(){u(this).bind(t,u.noop)},teardown:function(){u(this).unbind(t)}}})});