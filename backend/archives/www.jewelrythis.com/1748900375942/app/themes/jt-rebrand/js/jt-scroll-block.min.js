(r=>{function t(t,e){FT_Object.call(this),this.$el=r(t),this.$el.data("JtScrollBlock",this),this.$body=this.$el.find(".scroll-body"),this.$items=this.$el.find(".scroll-item"),this.options=e||{},this.current=0,this.loop=this.options.loop||!1,this.isAnimating=!1,this.offset=0,this.align=.5,this.playInterval=null,this.playDelay=this.options.playDelay||3e3,this.autoPlay=this.options.autoPlay||!1,this.pauseTimeout=null,this.pauseDelay=this.options.pauseDelay||1e4,this.options.eventTarget?this.$eventTarget=r(this.options.eventTarget):this.$eventTarget=this.$el,this.initAlign(),this.initControls(),this.init()}jt_extend(t,FT_Object),t.prototype.getOption=function(t,e){var i;return t in this.options?this.options[t]:void 0!==(i=this.$el.data(t))?this.options[t]=i:e},t.prototype.init=function(){var t=this;"swipe"===this.getOption("interact")?this.initInteractSwipe():this.initInteractDrag(),window.addEventListener("resize",function(){t.goTo(t.current,!1)}),this.on("change",this.updateItems),this.goTo(this.current,!1,function(){t.$el.css({opacity:1})}),this.autoPlay&&this.play()},t.prototype.initInteractDrag=function(){var e=this,i=null,n=0;function s(t){(e.isPlay()||e.isPaused())&&e.pause(),e.isAnimating&&(e.isAnimating=!1),i=t,n=e.offset}function o(t){i&&(t=i.x-t.x,e.setOffset(n-t))}function a(t){i&&(t=i.x-t.x,e.setOffset(n-t),i=null,setTimeout(function(){e.getClosestItemFromScroll()===e.current&&50<=Math.abs(n-e.offset)?e.next(n>e.offset?1:-1):e.goTo(e.getClosestItemFromScroll(),!0)},0),50<Math.abs(t))&&e.$eventTarget.one("click",function(){return!1})}this.$eventTarget[0].addEventListener("mousedown",function(t){0===t.button&&s({x:t.clientX,y:t.clientY})}),this.$eventTarget[0].addEventListener("touchstart",function(t){s({x:t.touches[0].clientX,y:t.touches[0].clientY})}),document.addEventListener("mousemove",function(t){o({x:t.clientX,y:t.clientY})}),document.addEventListener("touchmove",function(t){o({x:t.touches[0].clientX,y:t.touches[0].clientY})}),document.addEventListener("mouseup",function(t){0===t.button&&a({x:t.clientX,y:t.clientY})}),document.addEventListener("touchend",function(t){a({x:t.changedTouches[0].clientX,y:t.changedTouches[0].clientY})}),this.$eventTarget.on("dragstart",function(t){r(t.target).attr("contenteditable")||t.preventDefault()}),this.$eventTarget.on("selectstart",function(t){r(t.target).attr("contenteditable")||t.preventDefault()})},t.prototype.initInteractSwipe=function(){var t=this;this.$eventTarget.on("swipeleft",function(){(t.isPlay()||t.isPaused())&&t.pause(),t.next(1)}),this.$eventTarget.on("swiperight",function(){t.next(-1)})},t.prototype.initAlign=function(){var t=this.getOption("align");if(t){var e={left:0,center:.5,right:1};if(_.isObject(t))_.isEmpty(t)||(this.align=t);else if(t in e)this.align=e[t];else if(_.isString(t)){var i,n=t.split(/\s+/),s={};for(i in n){var o,a=n[i].match(/(sm|md|lg)-(left|center|right|\d+(\.\d+)?)/);a&&(o=a[1],(a=a[2]).match(/\d+(\.\d+)?/)?s[o]=parseFloat(a):s[o]=e[a])}_.isEmpty(s)||(this.align=s)}}},t.prototype.getId=function(){return this.$el.attr("id")},t.prototype.initControls=function(){var e,t=this.$el.attr("id");t&&(e=this,r("body").on("click",'.jt-nav-control[href="#'+t+'"],.jt-nav-control[data-target="#'+t+'"]',function(t){t.preventDefault(),e.handleControl(this)}),this.on("change",this.updateControls),this.updateControls())},t.prototype.handleControl=function(t){var e,i,n=r(t).data("item"),s=parseInt(r(t).data("step")),t=parseInt(r(t).data("page"));(this.isPlay()||this.isPaused())&&this.pause(),isNaN(s)?isNaN(t)?"next"===n?this.next(1):"prev"===n?this.next(-1):this.goTo(parseInt(n),!0):(n=Math.abs(t),e=Math.floor(this.current/n),i=Math.floor(this.$items.length/n)-1,i=Math.max(0,Math.min(i,e+(0<t?1:-1))),this.goTo(i*n,!0)):this.next(s)},t.prototype.updateControls=function(){var e,t=this.getId();t&&(e=this.current,r('.jt-nav-control[href="#'+t+'"],.jt-nav-control[data-target="#'+t+'"]').each(function(){var t=r(this);t.toggleClass("active",parseInt(t.data("item"))===e)}))},t.prototype.updateItems=function(){var t=this.getAlign()[2],e=Math.min(this.current,this.$items.length-t);this.$items.removeClass("active"),this.$items.slice(e,e+t).addClass("active")},t.prototype.getItemOffset=function(t){return t<0||t>=this.$items.length?0:(t=r(this.$items[t])).offset().left-t.parent().offset().left},t.prototype.getItemScrollOffset=function(t){var t=r(this.$items[t]),e=t.offset().left-t.parent().offset().left;return this.applyOffsetAlign(t,e)},t.prototype.applyOffsetAlign=function(t,e){var i=this.getAlign();return 1<i[2]&&(e=Math.min(e,this.getItemOffset(this.$items.length-i[2]))),this.$el.outerWidth()*i[0]-t.outerWidth()*i[1]-e},t.prototype.getAlign=function(){var t,e=.5,i=.5,n=1;if(_.isNumber(this.align))t=this.align;else if(_.isObject(this.align))for(var s in this.align)document.body.clientWidth>=jt_scroll_block.screen[s]&&(t=this.align[s]);return _.isArray(t)?(e=t[0],i=t[1],void 0!==t[2]&&(n=t[2])):_.isNumber(t)&&(i=e=t),[e,i,n]},t.prototype.getClosestItemFromScroll=function(){for(var t=this.offset,e=0,i=1/0,n=0,s=this.$items.length;n<s;n++){var o=this.getItemScrollOffset(n),o=Math.abs(t-o);o<i&&(e=n,i=o)}return e},t.prototype.limitOffset=function(t){return"auto"===this.getOption("limitOffset")?this.limitOffsetAuto(t):t},t.prototype.limitOffsetAuto=function(t){var e,i;return 0===this.$items.length?t:(e=this.getItemScrollOffset(0),i=this.getItemScrollOffset(this.$items.length-1),Math.min(e,Math.max(i,t)))},t.prototype.setOffset=function(t,e){var i,n=this.limitOffset(t);this.offset=n,e?((i=this).$body.addClass("animate"),window.requestAnimationFrame?window.requestAnimationFrame(function(){i.$body.css({transform:"translateX("+n+"px)"})}):setTimeout(function(){i.$body.css({transform:"translateX("+n+"px)"})},0)):(this.$body.removeClass("animate"),this.$body.css({transform:"translateX("+n+"px)"}))},t.prototype.goTo=function(t,e,i){var n,s;isNaN(t)||this.isAnimating||(this.loop||(t=Math.max(0,Math.min(t,this.$items.length-1))),!this.loop&&(t>=this.$items.length||t<0)?this.goTo(this.current,e):(0<=t?t%=this.$items.length:t=(this.$items.length+t%this.$items.length)%this.$items.length,s=(n=this).getItemScrollOffset(t),this.setOffset(s,e),this.current=t,this.trigger("change"),e?(this.isAnimating=!0,setTimeout(function(){n.isAnimating=!1,i&&i(),n.trigger("change-end")},500)):(i&&i(),n.trigger("change-end"))))},t.prototype.next=function(t){t=parseInt(t),isNaN(t)&&(t=1),this.goTo(this.current+t,!0)},t.prototype.isPlay=function(){return!!this.playInterval},t.prototype.isPaused=function(){return!!this.pauseTimeout},t.prototype.play=function(){var t;this.$items.length<=1||this.playInterval||((t=this).playInterval=setInterval(function(){t.next()},this.playDelay))},t.prototype.stop=function(){this.playInterval&&(clearInterval(this.playInterval),this.playInterval=null)},t.prototype.pause=function(t){this.pauseTimeout&&clearTimeout(this.pauseTimeout);var e=this;this.pauseTimeout=setTimeout(function(){e.pauseTimeout=null,e.play()},void 0===t?this.pauseDelay:t),this.stop()},window.JtScrollBlock=t})(jQuery),jQuery(function(t){t(".jt-scroll-block").each(function(){new JtScrollBlock(this,t(this).data("options"))})});