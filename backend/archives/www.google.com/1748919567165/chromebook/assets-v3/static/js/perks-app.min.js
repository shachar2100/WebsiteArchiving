!function(){"use strict";var e,t={6203:function(e,t,r){var n=r(2069);const s="getRawPerksData";var i=r(1152),o=r(844);const a="ak-now",l="chromebook",d="testing",c="on",m="os",h={eligibilityResponse:{etag:"Tyqj68Wvb4kJT4ky-esbTMxYqDs/yVUF28uUdD0-m8iz6iEQ161XHXg",kind:"chromeosregistration#resourcesItem",needHwid:!1,promoCode:"448366076138",promoCodeExpirationDate:"2019-01-01",redirectUrl:"",requestNonce:"1076098213626",responseNonce:"1311828009:1526592153617",result:"ELIGIBLE",serviceId:null,signature:"X3lRjIZHQpT81dpKsDtFE25KhklHf3YO0N5qgg1LukoyACbl336qhEvuox5tOw098eC9iqbH/o3CpuxTAymgPe/i+/fKvr7MeW5Q1hamVM6wXm5og3vAyuD5xjKGZQbpdVow/KRJdBxgdD1UeEENadmVuEk2Y3xa/dJ6ZHPYa6pFe4iiz3qcYN+DZtuGp60ZcwD1lpf1Pw4yx4a9R27WsxCw8+qbVkm/f6LC9po3elyDhhustYiHGCqswXX+vgqdBChq+HXp0RZhA0fdp1fUFDzCv/mwng0nRLbJLgsJ5qzst/8MwundkaBUaF0//DLNsQquPvEvWZ8/jTk4K9R3oA=="}},u="cartRef";function p(){let e=/cros/i.test(navigator.userAgent);if(!(0,n.BB)()){const t=new URLSearchParams(window.location.search);e=e||t.get(l)===c}return e}function g(){const e=new Date,t=new URLSearchParams(window.location.search).get(a);return t?function(e){const t=e?new Date(e.replace(/-/g,"/")):null;return t&&t instanceof Date&&!isNaN(t.getTime())?t:(console.error(`Invalid date ${e}`),e)}(t):e}function k(){if(!(0,n.BB)())return new URLSearchParams(window.location.search).get(d)===c}function _(){const e="otc=",t=window.location.hash;if(t&&-1!==t.indexOf(e))return t.substr(t.indexOf(e)+4)}function C(e,t){return Array.isArray(e)?e.find((e=>e.locale===t)):e}function b(e,t,r,n){const s=e.find((e=>e[0].includes("google.one"))),i=s?C(s[1],t):null,o=!!s&&new Date(i.start_date)<r&&new Date(i.end_date)>r;if(0===(e=e.filter((e=>{const s=C(e[1],t),{end_date:i,heroStartDate:o,id:a,specialHero:l,specialHeroNonChromebooks:d,start_date:c}=s,m=!c||new Date(c)<r,h=!i||new Date(i)>r,u=o&&new Date(o)<=r;return!(!m||!h)&&(d&&!p()?h&&u:l?h&&u&&n.includes(a):h&&u)}))).length&&s&&o)return[s];{const r=function(e,t){return e.reduce(((e,r)=>{if(!e)return r;const n=e[1],s=r[1],i=C(n,t),o=C(s,t);return i&&i.heroStartDate?new Date(o.heroStartDate)>new Date(i.heroStartDate)?r:e:r}),null)}(e,t);if(r)return[r]}return e||[]}function v(){const{locale:e}=(0,n.IP)();return{en:"en_US",es_419:"es_MX"}[e]??e}const f={eligibleServiceIds:["google.one.2019","stadia.2020","disney.2020","dropbox.2020","doom.ii.2020"],requestNonce:"1076098213626"};function y(){return new Promise(((e,t)=>{let r=!1,n=0;const s=setTimeout((()=>{chrome?.runtime?.sendMessage("kddnkjkcjddckihglkfcickdhbmaodcn",{cmd:"checkModelEligibility"},(t=>{r=!0,clearTimeout(n),e(t??{eligibleServiceIds:[]})})),n=setTimeout((()=>{r||(clearTimeout(s),e({eligibleServiceIds:[]}))}),1500)}),1e3)}))}function w(){return new Promise((e=>{e(f)}))}const P=async e=>{const t=v(),r=function(e,t){const r=t.split("_"),s=r[1]||r[0];return e.filter((e=>{const[,r]=e;if(0===r?.length)return!1;const i=C(r,t),{countryAllowlist:o,countryDenylist:a}=i;let{published:l}=i;const d=o&&o.includes(s.toUpperCase()),c=a&&!a.includes(s.toUpperCase());return(0,n.BB)()||(l=!0),l&&(d||c)}))}(e,t),s=k();let i=[];return p()&&!s&&(i=await async function(e){const t=e?w:y;if(window.eligibleServiceIds)return window.eligibleServiceIds;try{const e=await t();window.eligibleServiceIds=e?.eligibleServiceIds??[]}catch(e){console.error(e),window.eligibleServiceIds=[]}return window.eligibleServiceIds}(s)),{perks:r,eligibleIDs:i,currentLocale:t}},E={splitData:async e=>{const t=g(),{perks:r,eligibleIDs:n,currentLocale:s}=await P(e);return b(r,s,t,n).map((e=>{const[,t]=e;return C(t,v())}))},cardsData:async e=>{const t=g(),{perks:r,eligibleIDs:n,currentLocale:s}=await P(e);return function(e,t,r,n,s,i,o){const a=((e,t,r=[],n=!1,s=!1)=>e.filter((([e,i])=>{const o=r.length>0,a=t.some((([t,r])=>t===e));return n&&!s&&o?r.includes(e)&&!a:!a})))(e=e.filter((e=>{const t=C(e[1],r),{end_date:s,start_date:i}=t,o=!i||new Date(i)<=n,a=!s||new Date(s)>n;return o&&a})),t,s,i,o);return((e=[],t="en_US")=>0===e.length?[]:[...e].sort(((e,r)=>{const n=C(e[1],t),s=C(r[1],t);return(n.featuredRank?n.featuredRank:100)-(s.featuredRank?s.featuredRank:100)})).map((e=>C(e[1],t))))(a,r)}(r,b(r,s,t,n),s,t,n,p(),k())}};var S=class{constructor(){this.inputs=[{label:"Simulate Chromebook",id:l,type:"checkbox"},{label:"Simulate eligible",id:d,type:"checkbox"},{label:"Override current date",id:a,type:"date"},{label:"Override current OS",id:m,type:"number"}],this.init()}init(){this.render(),this.dom(),this.checkParams()}render(){const e=document.getElementById("main"),t=document.createElement("div");t.classList.add("perks-control");const r=this.inputs.map((e=>`\n        <label>\n          ${e.label}: <input id="${e.id}" type="${e.type}" name="${e.id}">\n        </label>\n        <br>\n      `)).join("");t.innerHTML=`\n    <strong>Testing (staging only):</strong>\n    <form action="">\n      ${r}\n      <br>\n      <button type="submit">Go</button>\n    </form>`,e.append(t)}dom(){this.dom={chromebook:document.getElementById(l),testing:document.getElementById(d),akNow:document.getElementById(a),os:document.getElementById(m)}}checkParams(){const e=new URLSearchParams(window.location.search);this.dom.chromebook.checked=/cros/i.test(navigator.userAgent)||e.get(l)===c,this.dom.testing.checked=e.get(d)===c,e.get(a)?this.dom.akNow.value=e.get(a):this.dom.akNow.valueAsDate&&(this.dom.akNow.valueAsDate=new Date),e.get(m)&&(this.dom.os.value=e.get(m))}},L=r(6206),$=class{constructor(e){this.element=e,this.modalEnableCssClass_="modal-content--enable",this.modalElement_=document.querySelector("[data-perks-modal]"),this.modalElement_&&this.init()}init(){const e=this.element.querySelector("#modal-selector"),t=["terms","steps","not-eligible"],r=document.querySelector(".redeem-perk__cb"),n=this.element.querySelector("#toggle-playground"),s=this.element.querySelector(".playground-content");n.addEventListener(L.zW.CLICK,(()=>{n.textContent=s.classList.contains("active")?"Show list":"Hide list",s.classList.toggle("active")})),e.addEventListener(L.zW.CHANGE,(e=>{const n=e.target.value;let s="";document.querySelectorAll(`.${this.modalEnableCssClass_}`).forEach((e=>{e.classList.remove(this.modalEnableCssClass_)})),t.includes(n)?(r.classList.add(this.modalEnableCssClass_),s=`.redeem-perk-${n}`):s=`.redeem-perk__${n}`,document.querySelector(s).classList.add(this.modalEnableCssClass_)})),this.modalElement_.addEventListener(L.Iq.MODAL_CLOSED,(()=>{document.querySelectorAll(`.${this.modalEnableCssClass_}`).forEach((e=>{e.classList.remove(this.modalEnableCssClass_)}))}))}},D=r(3249);class I{constructor(e,t){this.global_=window,this.isChromebook=p(),this.isEligibleOverride=k(),this.element=e,this.config_=this.getDataConfiguration_(),this.store_=t}build(){this.element&&(this.dom_(),this.init_())}dom_(){}init_(){}getDataConfiguration_(){return(0,D.Z)(this.element,"data-cb-component-config")}setGa4ModuleImpression(){this.element.setAttribute("data-ga-config",JSON.stringify({impression:{event:L.Fd.MODULE_IMPRESSION,module_name:!0,section_header:!0}}))}}function T(e){for(;e.firstChild;)e.removeChild(e.firstChild)}function M(e,t){e.innerHTML=t}var A=r(3519),q=r(7683),R=r(8892),G=r(5716),H=r(4622);const x="data-perks-current-perk",O="modal-content--enable",F="is-visible",B="not-cb-selected",N="outdated-cb-selected",U="redeem-perk",W="perk-promo";var K=class extends I{constructor(e,t){super(e,t),this.os=function(){let e=/cros/i.test(navigator.userAgent)&&navigator.userAgent.match(/Chrome\/([\d.]+)/)[1];if(!(0,n.BB)()){const t=new URLSearchParams(window.location.search).get(m);t&&(e=t)}return parseInt(e)}(),this.isSupportedVersion=this.isChromebook&&this.os>=86,this.blockCssClass_=this.config_.blockCssClass,this.showPerkID="",this.sectionHeaderValue="",this.activeModalElement={}}dom_(){this.dom={perksModalContainer:this.element.querySelector(`.${this.blockCssClass_}__wrapper`),perkFlowCb:this.element.querySelector(`.${U}__cb`),redeemPerkTermsContent:this.element.querySelector(`.${U}-terms`),perkFlowTermsHeadline:this.element.querySelector(`.${U}-terms__headline .glue-headline`),redeemPerkContHeadline:this.element.querySelector(`.${U}-steps__headline .glue-headline`),redeemPerkContHeadlineImage:this.element.querySelector(`.${U}__headline-image`),redeemPerkTermsDetails:this.element.querySelector(`.${U}-terms__detail`),redeemPerkStepsDetail:this.element.querySelector(`.${U}-steps-detail`),redeemPerkRedeemContent:this.element.querySelector(`.${U}-steps`),notEligibleContent:this.element.querySelector(`.${U}-not-eligible`),perkFlowNoneCb:this.element.querySelector(`.${U}__not-cb`),perkFlowNotSupportedCb:this.element.querySelector(`.${U}__not-supported-cb`),promoCodeInput:this.element.querySelector(`.${W}-code__input`),copyPromoCodeBtn:this.element.querySelector(`.${W}-code__copy`),promoCodeIsCopied:this.element.querySelector(`.${W}-code__copied`),perksModalCloseButton:this.element.querySelector(".glue-modal__close-btn"),perksModalCloseButtonElements:this.element.querySelectorAll(".redeem-perk__close-modal"),redeemPerkContBtn:this.element.querySelector(".redeem-perk__btn-redeem-continue"),perkRedeemBtn:this.element.querySelector(".redeem-perk__btn-redeem-on")}}init_(){this.store_.subscribe(A.F.REGISTER_REDEEM_PERKS,this.createRedeemPerks_.bind(this)),this.perksData=this.store_.state.perksFilteredData.allAvailablePerks,this.modalTriggers=[],this.setModalActionListeners_(),this.checkShowPerk_(),this.setGa4ModuleImpression(),this.registerCtaModalGa4Events_(this.element),this.registerInlineLinksGa4Events_()}redirectToMain_(){location.replace(location.origin+location.pathname)}checkShowPerk_(){const e=new URLSearchParams(window.location.search);this.showPerkID=e.get("id"),this.showPerkID&&window.location.pathname.split("/").includes("perks")&&this.createAutoOpeningModal_(this.showPerkID)}createAutoOpeningModal_(e){this.store_.dispatch(A.F.REGISTER_REDEEM_PERKS,{triggerElement:this.element,perkId:e,hasAutoOpening:!0})}showCurrentPerk_(e,t,r){this.setModalContent_(e,t),r&&this.sendGa4GetPerkEvent_(r);const n=this.perksData.find((t=>t.id===e));n?this.sectionHeaderValue=n.serviceName:this.redirectToMain_()}setModalContent_(e,t){let r;if(this.element.setAttribute(x,t),this.isChromebook){const t=()=>this.notSupportedMessage_(B,N,this.dom.perkFlowNoneCb,this.dom.perkFlowNotSupportedCb);r=this.isSupportedVersion?this.redeemMessage_(e):t()}else r=this.notSupportedMessage_(N,B,this.dom.perkFlowNotSupportedCb,this.dom.perkFlowNoneCb);return r}hideModal_(){this.element.setAttribute(x,""),this.dom.redeemPerkContBtn.disabled=!1,this.dom.redeemPerkTermsContent.classList.remove(O),this.dom.perkFlowNoneCb.classList.remove(O),this.dom.perkFlowCb.classList.remove(O),this.dom.promoCodeIsCopied.classList.remove(F),this.dom.perkRedeemBtn.setAttribute("href","#"),this.dom.redeemPerkTermsContent.classList.remove(O),this.dom.redeemPerkRedeemContent.classList.remove(O),this.dom.notEligibleContent.classList.remove(O),this.dom.perkFlowTermsHeadline.innerHTML="",this.dom.redeemPerkTermsDetails.innerHTML="",this.dom.redeemPerkStepsDetail.innerHTML="",this.dom.perksModalContainer.classList.remove(B)}notSupportedMessage_(e,t,r,n){this.dom.perksModalContainer.classList.remove(e,t),this.dom.perksModalContainer.classList.add(t),r.classList.remove(O),n.classList.add(O),this.activeModalElement=n}redeemMessage_(e){this.currentPerk=this.perksData.find((t=>t.id===e)),this.currentPerk||this.redirectToMain_(),this.dom.perkFlowTermsHeadline.innerHTML=this.currentPerk.headline,this.dom.perkFlowTermsHeadline.setAttribute("aria-label",this.currentPerk.headline),this.dom.redeemPerkContHeadline.innerHTML=this.currentPerk.headline,this.dom.redeemPerkContHeadline.setAttribute("aria-label",this.currentPerk.headline),this.modalHeadlineImage=this.currentPerk.modalHeadlineImage?.url?this.currentPerk.modalHeadlineImage.url:"",this.dom.redeemPerkContHeadlineImage.className="",this.dom.redeemPerkContHeadlineImage.classList.add("redeem-perk__headline-image"),T(this.dom.redeemPerkContHeadlineImage),this.modalHeadlineImage&&(this.dom.redeemPerkContHeadlineImage.innerHTML=`<img\n        src="${this.modalHeadlineImage}"\n        alt="${this.currentPerk.headline}">`);const t=this.currentPerk.modalHeadlineImgPosition?this.currentPerk.modalHeadlineImgPosition:"center";t&&this.dom.redeemPerkContHeadlineImage.classList.add(`redeem-perk__headline-image--${t}`),this.dom.redeemPerkTermsDetails.innerHTML=this.currentPerk.terms,this.dom.redeemPerkStepsDetail.innerHTML=this.currentPerk.redeemSteps,this.dom.redeemPerkTermsContent.classList.add(O),this.dom.perkFlowCb.classList.add(O),this.activeModalElement=this.dom.redeemPerkTermsContent,this.setUpTermsAnalytics_()}createRedeemPerks_(e){const{triggerElement:t,perkId:r,ga4Data:n,hasAutoOpening:s}=e.args;if(this.modalTriggers.includes(t))return;const i=new R.u_(this.element,t,this.dom.perksModalCloseButton),o=s?`${r}-auto-opening`:r;this.setModalCloseListeners_(i,o),this.setModalA11yListeners_(o),s?(this.showCurrentPerk_(r,o,n),i.open()):t.addEventListener(L.zW.CLICK,(e=>{e.preventDefault(),this.showCurrentPerk_(r,o,n),i.open()})),this.modalTriggers.push(t)}onEligibilityResponse_(e){if(e&&"RETRY"!==e){const t=_(),{eligibilityResponse:r}=e;this.dom.redeemPerkContBtn.disabled=!1;const n=document.createTextNode(this.currentPerk.redeemButtonTitle);let s=this.currentPerk.redeemUrlFormat||"";if("iframe"!==this.currentPerk.redeemType&&r.promoCode&&(s=s.replace("[[CODE]]",r.promoCode.split(",").pop()||"")),t&&"iframe"===this.currentPerk.redeemType&&(s+="&otc="+t),this.currentPerk.redirectOnEligible)return void(window.location=function(e){const t="TOKEN",r=(n=u,s=function(e,t){const r=new RegExp("[?&]"+e+"=([^&#]*)","i").exec(t);return r?r[1]:null}(u,e),n+"="+s+"&");var n,s;return encodeURI(e.replace(r,t)).replace(t,r)}(s));this.dom.promoCodeInput.value=r.promoCode,this.dom.copyPromoCodeBtn.setAttribute("data-event-label",r.promoCode),this.dom.perkRedeemBtn.setAttribute("href",s),this.dom.perkRedeemBtn.setAttribute("target","_blank"),this.dom.perkRedeemBtn.removeChild(this.dom.perkRedeemBtn.firstChild),this.dom.perkRedeemBtn.appendChild(n),this.dom.redeemPerkTermsContent.classList.remove(O),this.dom.redeemPerkRedeemContent.classList.add(O),this.dom.perksModalCloseButton.focus(),this.activeModalElement=this.dom.redeemPerkRedeemContent}else this.dom.redeemPerkTermsContent.classList.remove(O),this.dom.notEligibleContent.classList.add(O),this.dom.perksModalCloseButton.focus(),this.activeModalElement=this.dom.notEligibleContent}onPerkFlowContClick_(e){const t=(0,n.IP)().locale.split("_"),r="en"===t.toString()?"US":t[t.length-1];this.dom.redeemPerkContBtn.disabled=!0;const s=_(),i="disney.2019"===this.currentPerk.serviceId?"Google":this.currentPerk.serviceName,o={serviceId:this.currentPerk.serviceId,serviceName:i,origin:window.location.href,isGroupType:!1,requestNonce:Math.floor(Math.random()*(new Date).getTime()+1)+","+r,failureCallback:function(e){console.error("failure:",e),this.onEligibilityResponse_(e)}.bind(this),successCallback:function(e){this.onEligibilityResponse_(e)}.bind(this)};s&&(o.opt_otc=s),"iframe"===this.currentPerk.redeemType||this.isEligibleOverride?this.onEligibilityResponse_(h):echo.checkEligibility(o),this.onAnalyticsCta_(e)}onCopyPromoCodeClicked_(){this.dom.promoCodeInput.select(),document.execCommand(L.Gh.COPY),this.dom.promoCodeIsCopied.classList.add(F),this.dom.promoCodeIsCopied.focus()}setModalActionListeners_(){this.dom.redeemPerkContBtn.addEventListener(L.zW.CLICK,this.onPerkFlowContClick_.bind(this)),this.dom.copyPromoCodeBtn.addEventListener(L.zW.CLICK,this.onCopyPromoCodeClicked_.bind(this))}modalCloseAction_(e,t){const r=this.getSectionHeaderFromActiveModal_();e.close(),this.element.classList.remove("glue-modal-closing"),this.hideModal_(),this.sendGa4PopupClose_(t,r)}setModalCloseListeners_(e,t){this.element?.addEventListener(L.zW.CLICK,(r=>{r.target===r.currentTarget&&this.element.getAttribute("data-perks-current-perk")===t&&this.modalCloseAction_(e)}));const r=[this.dom.perksModalCloseButton,...this.dom.perksModalCloseButtonElements];r?.forEach((r=>{r.addEventListener(L.zW.CLICK,(r=>{this.element.getAttribute("data-perks-current-perk")===t&&this.modalCloseAction_(e,r.currentTarget)}))}))}setModalA11yListeners_(e){this.element.addEventListener(L.Iq.MODAL_OPENED,(()=>{this.element.getAttribute("data-perks-current-perk")===e&&this.element?.setAttribute(L.s5.ARIA_HIDDEN,"false")})),this.element.addEventListener(L.Iq.MODAL_CLOSED,(()=>{this.element.getAttribute("data-perks-current-perk")===e&&this.element?.setAttribute(L.s5.ARIA_HIDDEN,"true")}))}setUpTermsAnalytics_(){this.dom.perksModalContainer.querySelectorAll("a:not([class])").forEach((e=>{e.addEventListener(L.zW.CLICK,(e=>{this.onAnalyticsNonCta_(e)}))}))}onAnalyticsNonCta_(e,t){const r=e.currentTarget,n=r.href,s=(r.innerText||r.title).trim(),i={event:"general_link_click_modal",module_name:!0,section_header:t||!0,event_label:r.getAttribute("data-event-label")||s,link_url:n,scroll_position:H.Z.getInstance().getEventContextInfo().scrollPosition,modal_name:(0,q.q)(r)};(0,G.pr)(this.element,i)}onAnalyticsOpenRedeem_(){const e=this.element.querySelector(`.${O} .glue-headline`),t={event:"open_pop_up_redeem",module_name:!0,section_header:!e||e.innerText?.trim()};(0,G.pr)(this.element,t)}onAnalyticsCloseRedeem_(){const e=this.element.querySelector(`.${O} .glue-headline`),t={event:"close_pop_up_redeem",module_name:!0,section_header:!e||e.innerText?.trim()};(0,G.pr)(this.element,t)}sendGa4GetPerkEvent_(e){const{element:t,ga4Config:r}=e;(0,G.pr)(t,r)}sendGa4PopupClose_(e,t){const r=e?.innerText?.trim()||e?.getAttribute("aria-label")||this.dom.perksModalCloseButton.getAttribute("aria-label"),n={event:L.Fd.POP_UP_CLOSE,module_name:!0,section_header:this.sectionHeaderValue,link_text:r,modal_name:(0,q.q)(this.activeModalElement)};(0,G.pr)(this.element,n)}registerCtaModalGa4Events_(e){e.querySelectorAll("a[class]").forEach((e=>{e.classList.contains("disclaimer")||e.addEventListener(L.zW.CLICK,(e=>{this.onAnalyticsCta_(e)}))}))}registerInlineLinksGa4Events_(){[...this.dom.perksModalContainer.querySelectorAll("a:not([class])"),...this.dom.perksModalContainer.querySelectorAll('a[class="disclaimer"]')].forEach((e=>{e.addEventListener(L.zW.CLICK,(e=>{const t=this.element.querySelector(`.${O} .glue-headline`),r=!t||t.innerText?.trim();this.onAnalyticsNonCta_(e,r)}))}))}onAnalyticsCta_(e){const t=e.currentTarget,r={event:"cta_click_modal",module_name:!0,section_header:this.sectionHeaderValue,link_text:!0,link_url:!0,link_type:!0,modal_name:(0,q.q)(t)};(0,G.pr)(t,r)}getSectionHeaderFromActiveModal_(){let e=this.element.querySelector(`.${O}`);return e.classList.contains(`${U}__cb`)&&(e=e.querySelector(`.${O}`)),e.querySelector(".glue-headline").innerText}},j=class extends I{constructor(e,t){super(e,t)}dom_(){this.dom={perksMainHero:document.querySelector(".hero-default"),headlinesList:this.element.querySelectorAll(".hero-default__headline-wrapper .glue-headline")}}init_(){this.dom.perksMainHero.classList.remove("invisible"),this.isChromebook?this.dom.headlinesList[0].remove():this.dom.headlinesList[1].remove(),this.setGa4ModuleImpression()}};const z=e=>e&&"boolean"==typeof e?"lazy":"eager",Z=e=>e&&"string"==typeof e?e:"",V=({imageSrc:e,imageSizes:t,alt:r,isLazy:n})=>{const s={extraLarge:1440,large:1024,medium:600,small:360};t=((e,t)=>{let r=!1;if(null===e||"object"!=typeof e||null===t||"object"!=typeof t)return r;for(const n in e)if(t.hasOwnProperty(n)){r=!0;break}return r})(s,t)?{...s,...t}:s;let i="";const o=(t,r,n=365)=>`<source media="(min-width: ${t}px)"\n    srcset="${e}=w${r}-rw-e${n} 1x" type="image/webp"/>\n  <source media="(min-width: ${t}px)"\n    srcset="${e}=w${r}-e${n} 1x"/>\n  `;for(const[e,r]of Object.entries(s))i+=o(r,t[e]);return`\n  <picture>\n    ${i}\n    <img\n      loading="${z(n)}"\n      src="${e}=w360-e365"\n      alt="${Z(r)}"/>\n  </picture>\n  `},X=({imageSrc:e,imageDimensions:t,alt:r,classes:n,isLazy:s})=>`\n  <img${n&&"string"==typeof n?` class="${n}"`:""}${t?.h&&"number"==typeof t.h?` height="${t.h}"`:""}${t?.w&&"number"==typeof t.w?` width="${t.w}"`:""}\n    loading="${z(s)}"\n    src="${e}"\n    alt="${Z(r)}"/>\n  `,Y="/chromebook/",J="split-content";var Q=class extends I{constructor(e,t){super(e,t)}dom_(){this.dom={elementMainContainer:this.element.querySelector(`.${J}__main-container`)}}init_(){if(this.data=this.store_.state.perksFilteredData.splitData,this.data.error)return this.element.classList.add("hidden"),void console.error(this.data.error);this.setupPerks(this.data)}getSplitContentTemplate(e){const{serviceName:t,headline:r,cardFooter:n,icon:s,heroScreenImage:i,serviceId:o,secondaryUrl:a,isDarkDesign:l}=e;l&&this.element.classList.add(`${J}--is-dark`);const d=(new Date).getTime(),c=this.element.dataset.perksSplitContentImage,m=this.global_.getPerkCta,h=this.global_.learnMoreCta,u={imageSrc:`${s.url}?cb=${d}`,imageDimensions:{h:48,w:48},alt:`${s.alt||t}`,classes:"split-content__main-icon"};i?.url&&(i.url=i.url.endsWith("=s0")?i.url.replace(/=s0$/,"=w650-rw-e365"):`${i.url}=w650-rw-e365`);const p={imageSrc:`${i?.url}?cb=${d}`,imageDimensions:{h:i.height,w:i.width},classes:"split-content__overlay-image"},g=[{imageSrc:c,imageSizes:{extraLarge:700,large:650,medium:780,small:550}},p,i];return`\n    <section class="${J}__text-content">\n      ${X(u)}\n      <h2 class="glue-headline glue-headline--headline-4">\n        ${t}\n      </h2>\n      <div class="${J}__body glue-spacer-2-top">\n        <p class="${J}__description glue-body--large">${r}</p>\n      </div>\n      <footer class="${J}__text-footer">\n        <div class="${J}__cta-line">\n          <button class="glue-button glue-button--high-emphasis"\n            data-get-perk="${o}">\n            ${m}\n          </button>\n          ${a?`<a class="glue-button glue-button--low-emphasis"\n              data-event-action="cta click"\n              href="${function(e,t){const r=e.includes("/intl/"),n=!e.startsWith("http")&&!e.startsWith("//");if(t||(t=location.pathname.split(Y)[0]),!r&&n){const r=e.startsWith(Y)?"":Y;e=`${t}${r}${e}`.replace(/\/\//g,"/")}return e}(a)}">\n              ${h}\n              </a>`:""}\n        </div>\n        ${n?`<p class="disclaimer">${n}</p>`:""}\n      </footer>\n    </section>\n    <section class="${J}__media-content">\n    ${l?X(p):this.getDeviceImageTemplate(...g)}\n    </section>\n    `}getDeviceImageTemplate(e,t,r){return`\n      ${V(e)}\n      ${r&&r.url?`<div class="${J}__overlay-wrapper">\n            ${X(t)}\n            </div>`:""}\n    `}setupPerks(e){this.element.classList.remove("entered-once"),e&&e.length>0?(T(this.dom.elementMainContainer),e.forEach((e=>{const t=this.getSplitContentTemplate(e);M(this.dom.elementMainContainer,t)})),this.setGa4ModuleImpression(),this.setUpGetPerkFlow()):this.element.classList.add("hidden"),setTimeout((()=>{this.element.classList.add("entered-once")}),500)}setUpGetPerkFlow(){this.element.querySelectorAll("[data-get-perk]").forEach((e=>{this.store_.dispatch(A.F.REGISTER_REDEEM_PERKS,{triggerElement:e,perkId:e.getAttribute("data-get-perk"),ga4Data:{element:this.element,ga4Config:this.getGa4GetPerkEvent_()}})}))}getGa4GetPerkEvent_(){return{event:L.Fd.CTA_CLICK,module_name:!0,section_header:!0,link_text:!0,link_type:!1,link_url:!1}}},ee=class extends I{constructor(e,t){super(e,t)}dom_(){this.dom={elementGridWrapper:this.element.querySelector(".perk-cards__section"),emptyWarning:this.element.querySelector(".perk-cards__empty-card"),helpCard:this.element.querySelector(".perk-cards__card--help")}}async init_(){this.gridData=this.store_.state.perksFilteredData.cardsData,this.hasHeroPerk=this.store_.state.perksFilteredData.hasHeroPerk,this.gridData.error?this.appendTargetElementToDom(this.dom.emptyWarning,this.dom.elementGridWrapper):this.setupPerksGrid(this.gridData)}getGridCardTemplate(e){const{serviceName:t,category:r,headline:n,cardFooter:s,icon:i,serviceId:o}=e,a=(new Date).getTime(),l=this.global_.getPerkCta,d={imageSrc:`${i&&i.url?i.url:""}?cb=${a}`,alt:`${i&&i.alt?i.alt:t}`};return`\n    <div class="glue-grid__col perk-cards__card">\n      <div class="perk-cards__card-header">\n        <div class="perk-cards__card-logo">\n          ${V(d)}\n        </div>\n        <div class="perk-cards__card-title">\n          ${r?` <p class="perk-cards__card-eyebrow">${r}</p>`:""}\n          <h2 class="glue-headline glue-headline--headline-4" aria-label="${t}">\n            ${t}\n          </h2>\n        </div>\n      </div>\n      <div class="perk-cards__card-body">\n        <p>${n}</p>\n      </div>\n      <div class="perk-cards__card-footer">\n        <button class="glue-button glue-button--high-emphasis"\n          data-get-perk="${o}"\n          data-card-header="${t}">\n          ${l}\n        </button>\n        ${s?`<div class="perk-cards__card-disclaimer">\n                <p class="disclaimer">${s}</p>\n              </div>`:""}\n      </div>\n    </div>\n    `}setupPerksGrid(e){if(e&&e.length>0){T(this.dom.elementGridWrapper);let t="";e.forEach((e=>{t+=this.getGridCardTemplate(e)})),M(this.dom.elementGridWrapper,t),this.setGa4ModuleImpression(),this.isChromebook&&this.appendTargetElementToDom(this.dom.helpCard,this.dom.elementGridWrapper),this.setUpGetPerkFlow()}else this.hasHeroPerk&&this.isChromebook?this.appendTargetElementToDom(this.dom.helpCard,this.dom.elementGridWrapper):this.appendTargetElementToDom(this.dom.emptyWarning,this.dom.elementGridWrapper)}appendTargetElementToDom(e,t){e.classList.remove("hidden"),t.append(e)}setUpGetPerkFlow(){this.dom.elementGridWrapper.querySelectorAll("[data-get-perk]").forEach((e=>{this.store_.dispatch(A.F.REGISTER_REDEEM_PERKS,{triggerElement:e,perkId:e.getAttribute("data-get-perk"),ga4Data:{element:this.element,ga4Config:this.getGa4GetPerkEvent_(e.dataset.cardHeader)}})}))}getGa4GetPerkEvent_(e){return{event:L.Fd.CTA_CLICK,module_name:!0,section_header:e,link_text:!0,link_type:!1,link_url:!1}}};!async function(){const{currentScript:e}=window.document,{perksSource:t,getPerkCta:r,learnMoreCta:a}=e.dataset;window.getPerkCta=r,window.learnMoreCta=a;const l=document.querySelector("[data-perks-modal]")||document.querySelector("[data-perks-hero]")||document.querySelector("[data-perks-split-content]")||document.querySelector("[data-perks-grid]"),d={"[data-perks-modal]":{PerkComponent:K,registerGa4:!1},"[data-perks-hero]":{PerkComponent:j,registerGa4:!0},"[data-perks-split-content]":{PerkComponent:Q,registerGa4:!0},"[data-perks-grid]":{PerkComponent:ee,registerGa4:!0}},c=new o.Z(i.Z,{global:window});if(i.Z.subscribe(s,(()=>{})),l){(0,n.r8)()&&(new S,document.querySelectorAll("[data-perks-modal-playground]").forEach((e=>{new $(e)})));let e=[];try{e=await function(e){if(e+=`?cb=${(new Date).getTime()}`,window.perks)return new Promise((e=>{e(window.perks)}));if(e=decodeURI(e),(0,n.IP)()){const t=v();e=e.replace("{locale}",t.toLowerCase())}return fetch(e).then((e=>e.json())).then((e=>(window.perks=Object.entries(e),window.perks)))}(t)}catch(t){e={error:t.message}}const r=await(async e=>{let t={};for(const[r,n]of Object.entries(E)){t[r]=[];try{t[r]=await n(e)}catch(e){t[r]={error:e.message}}if("splitData"===r){const e=!t[r].hasOwnProperty("error")&&t[r].length>0;t={...t,hasHeroPerk:e}}}const r=Array.isArray(t.splitData)&&Array.isArray(t.cardsData)?[...t.splitData,...t.cardsData]:[];return{...t,allAvailablePerks:r}})(e);i.Z.dispatch(s,{perksFilteredData:r},!0);for(const[e,{PerkComponent:t,registerGa4:r}]of Object.entries(d))document.querySelectorAll(e).forEach((e=>{var n;new t(e,i.Z).build(),r&&[n=e,...n.querySelectorAll("[data-ga-config]"),...n.querySelectorAll("[data-event-action]")].forEach(c.updateTrackedElements)}))}}()}},r={};function n(e){var s=r[e];if(void 0!==s)return s.exports;var i=r[e]={exports:{}};return t[e].call(i.exports,i,i.exports,n),i.exports}n.m=t,e=[],n.O=function(t,r,s,i){if(!r){var o=1/0;for(c=0;c<e.length;c++){r=e[c][0],s=e[c][1],i=e[c][2];for(var a=!0,l=0;l<r.length;l++)(!1&i||o>=i)&&Object.keys(n.O).every((function(e){return n.O[e](r[l])}))?r.splice(l--,1):(a=!1,i<o&&(o=i));if(a){e.splice(c--,1);var d=s();void 0!==d&&(t=d)}}return t}i=i||0;for(var c=e.length;c>0&&e[c-1][2]>i;c--)e[c]=e[c-1];e[c]=[r,s,i]},n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.e=function(){return Promise.resolve()},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.j=9684,function(){var e={9684:0};n.O.j=function(t){return 0===e[t]};var t=function(t,r){var s,i,o=r[0],a=r[1],l=r[2],d=0;if(o.some((function(t){return 0!==e[t]}))){for(s in a)n.o(a,s)&&(n.m[s]=a[s]);if(l)var c=l(n)}for(t&&t(r);d<o.length;d++)i=o[d],n.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return n.O(c)},r=self.webpackChunkxl_chromebook=self.webpackChunkxl_chromebook||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}();var s=n.O(void 0,[8592],(function(){return n(6203)}));s=n.O(s)}();